<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Friend Finder - Survey</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS, then font-awesome for icons -->
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>

  <div class="container">
    <div class="jumbotron">
        <h1 class="display-3 text-center"><i class="fa fa-users"></i>Survey Questions</h1>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">Friend Survey</h4>
                </div>
                <div class="panel-body">
                    <form role="form">
                        <div class="form-group">
                            <label for="">Name (required)</label>
                            <input type="text" class="form-control" id="friend_name">
                        </div>
                        <div class="form-group">
                            <label for="">Photo Image URL</label>
                            <input type="text" class="form-control" id="friend_photo">
                        </div>
                        <h4>On a scale of 1-5, would you : </h4>
                        <div class="form-group">
                            <label for="">Your mind is always buzzing with unexplored ideas and plans.</label>
                            <select id="a0" class="form-control required">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">Generally speaking, you rely more on your experience than your imagination.</label>
                            <select id="a1" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">You find it easy to stay relaxed and focused even when there is some pressure.</label>
                            <select id="a2" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">You rarely do something just out of sheer curiosity.</label>
                            <select id="a3" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">People can rarely upset you.</label>
                            <select id="a4" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">It is often difficult for you to relate to other people’s feelings.</label>
                            <select id="a5" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">In a discussion, truth should be more important than people’s sensitivities.</label>
                            <select id="a6" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">You rarely get carried away by fantasies and ideas.</label>
                            <select id="a7" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</label>
                            <select id="a8" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">You feel more energetic after spending time with a group of people.</label>
                            <select id="a9" class="form-control">
                                <option selected value="">Select an Option...</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>
                    </form>
                    <button type="submit" class="btn btn-primary btn-block col-md-2" id="submit">Submit</button>
                </div>
            </div>
          <!-- Modal -->
          <div id="resultsModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">
                  <h2 class="modal-title"><strong>Best Match</strong></h2>
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                  <div class = "col-xs-12 col-md-6">
                    <h2 id="matchName"></h2>
                    <div id="matchImg" class="text-center">
                      <!-- <img src="" alt="" class="img-responsive"> -->
                    </div>
                </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>

            </div>
          </div>

        </div>
    </div>
    <br>

    <footer class="footer">
      <div class="container">
          <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/tmederos/FriendFinder" target= '_blank'>GitHub Repo <i class="fa fa-github" style="font-size:24px"></i> | </a><a href="/"> Home <i class="fa fa-home" style="font-size:24px"></i></a></p>
      </div>
    </footer>
  </div>

  <script type="text/javascript">
    // Capture the form inputs
    $("#submit").on("click", function(){
      // Form validation
      function validateForm() {
        var isValid = true;
        $('.form-control').each(function() {
          if ( $(this).val() === "" )
            isValid = false;
        });
        $('.form-control required').each(function() {
          if ( $(this).val() === "")
            isValid = false
        });
          return isValid;
      }
      // If all required fields are filled
      if (validateForm())
      {
          // Create an object for the user's data
          var newFriend = {
              name: $('#friend_name').val().trim(),
              photo: $('#friend_photo').val().trim(),
              scores: []
          };
          for (i = 0; i < 10; i++) {
              var newVal = $('#a' + i).val();
              newFriend.scores.push(parseInt(newVal));
          }
          //
          // Grab the URL of the website
          var currentURL = window.location.origin;
          // AJAX post the data to the friends API.
          $.post(currentURL + "/api/friends", newFriend, function(data){
            $("#matchName").text(data.name);
            var image = $( "<img>");
            image.attr("src", data.photo);
            image.width( 360 );
            $('#matchImg').append( image );
            // Show the modal with the best match
            $("#resultsModal").modal('toggle');
          });
      }
      else
      {
        alert("Please fill out all fields before submitting!");
      }
      return false;
    });
    $('#resultsModal').on('hidden.bs.modal', function () {
      window.location.reload(true);
    })

    // This function resets all of the data in our tables.
    // This was for testing and not used in final application
    function clearTable() {
      var currentURL = window.location.origin;
      $.ajax({ url: currentURL + "/api/clear", method: "POST" });
    }

  </script>

</body>
</html>

